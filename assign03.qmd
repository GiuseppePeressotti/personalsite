---
title: "Assignment 3: Mapping Census Data"
---

```{r}
library(tidycensus)
library(tigris)
library(sf)
library(dplyr)
library(ggplot2)
library(readr)

#API ALREADY SAVED AND CENSORED
```

```{r}

vars <- load_variables(2023, "acs5", cache = TRUE)


tx_data <- get_acs(
  geography = "county",
  variables = c(
    median_inc = "B19013_001",
    poverty = "B17001_002"
  ),
  state = "TX",
  year = 2023,
  geometry = TRUE,
  output = "wide"
)

ggplot(tx_data) +
  geom_sf(aes(fill = median_incE), color = NA) +
  scale_fill_viridis_c(option = "plasma", na.value = "grey90") +
  labs(
    title = "Median Household Income (Texas Counties, 2023 ACS)",
    fill = "Income ($)"
  ) +
  theme_minimal()

top10_poverty <- tx_data %>%
  arrange(desc(povertyE)) %>%
  slice(1:10) %>%
  select(NAME, povertyE, povertyM)

bottom10_poverty <- tx_data %>%
  arrange(povertyE) %>%
  slice(1:10) %>%
  select(NAME, povertyE, povertyM)

top10_poverty
bottom10_poverty

```


# Interpretation

The map that I created visualizes median household income across Texas using 2023 census data. Based on the variation of the gradient, we can identify the richest counties that are mostly clustered around metropolititan areas, with the deep purple color identifying the more remote regions on the far West area of Texas. The tables identify the areas with the highest (and bottom) families in terms of poverty (below poverty line): the counties with the largest absolute number of residents in poverty are: Harris, Dallas, Bexar, Hidalgo, Tarrant, El Paso, and Travis. Those are followed by border suburban counties like Cameron, Collin, and Denton. These counties appear at the top not necessarily because they are the poorest, but because they are large-population counties.